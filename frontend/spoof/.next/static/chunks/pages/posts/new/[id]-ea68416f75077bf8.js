(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{1841:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/new/[id]",function(){return o(4750)}])},8962:function(e,t,o){"use strict";var r=o(7462),a=o(7294),n=o(6522),s=o(4482),i=o(5893);let l=(e,t)=>(0,r.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),c=e=>(0,r.Z)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),u=function(e){var t;let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};o&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(t=>{var o;let[r,n]=t;a[e.getColorSchemeSelector(r).replace(/\s*&/,"")]={colorScheme:null==(o=n.palette)?void 0:o.mode}});let n=(0,r.Z)({html:l(e,o),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,r.Z)({margin:0},c(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},a),s=null==(t=e.components)||null==(t=t.MuiCssBaseline)?void 0:t.styleOverrides;return s&&(n=[n,s]),n};t.ZP=function(e){let{children:t,enableColorScheme:o=!1}=(0,n.i)({props:e,name:"MuiCssBaseline"});return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(s.Z,{styles:e=>u(e,o)}),t]})}},4750:function(e,t,o){"use strict";o.r(t);var r=o(5893),a=o(7294),n=o(4191),s=o(747),i=o(9979),l=o(8962),c=o(4246),u=o(4440),d=o(4466),h=o(3465),m=o(1946),g=o(8163),p=o(9496),x=o(7066),v=o(1163);t.default=()=>{let[e,t]=(0,a.useState)(""),[o,b]=(0,a.useState)(""),[f,Z]=(0,a.useState)([]),[j,y]=(0,a.useState)(""),S=(0,n.Z)(),k=(0,v.useRouter)(),{id:P}=k.query,C="http://localhost:3002",_=new FormData;(0,a.useEffect)(()=>{P&&w(P)},[P]);let w=async e=>{let o=sessionStorage.getItem("user"),r=sessionStorage.getItem("bearerToken");try{let a=await x.Z.get("".concat(C,"/objeto/").concat(o,"/").concat(e,"/detalhes"),{headers:{Authorization:"Bearer "+r}});if(200===a.status){let{description:e,tags:o,name:r}=a.data.data;b(e),Z(o),t(r)}else(0,p.yv)("Erro ao carregar os dados do post.",{variant:"error"})}catch(e){console.error(e),(0,p.yv)("Erro ao carregar os dados do post.",{variant:"error"})}},E=e=>{Z(f.filter(t=>t!==e))},z=async e=>{e.preventDefault();let t=sessionStorage.getItem("user"),r=sessionStorage.getItem("bearerToken");if(0===o.length){(0,p.yv)("Descri\xe7\xe3o \xe9 obrigat\xf3ria",{variant:"error"});return}_.set("description",o),_.set("tags",f.join());try{await x.Z.patch("".concat(C,"/objeto/").concat(t,"/").concat(P),_,{headers:{Authorization:"Bearer "+r}}),(0,p.yv)("Post atualizado com sucesso!",{variant:"success"}),k.push("/")}catch(e){console.error(e),(0,p.yv)("Ocorreu um erro ao salvar o post.",{variant:"error"})}};return(0,r.jsx)(s.Z,{theme:S,children:(0,r.jsxs)(i.Z,{component:"main",maxWidth:"xs",children:[(0,r.jsx)(l.ZP,{}),(0,r.jsx)(c.Z,{component:"h1",variant:"h5",sx:{marginTop:5},children:"Editar Post"}),(0,r.jsx)(u.Z,{component:"form",noValidate:!0,onSubmit:z,sx:{my:3},children:(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{autoComplete:"name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Arquivo",autoFocus:!0,value:e,disabled:!0})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{autoComplete:"name",name:"descricao",required:!0,fullWidth:!0,id:"descricao",label:"Descri\xe7\xe3o",autoFocus:!0,value:o,onChange:e=>b(e.target.value)})}),f.length>0&&(0,r.jsx)(d.ZP,{item:!0,xs:12,children:f.map(e=>(0,r.jsx)(m.Z,{label:e,onDelete:()=>E(e)},e))}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(h.Z,{label:"Tag",value:j,onChange:e=>y(e.target.value)})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{variant:"outlined",onClick:()=>{0!==j.length&&(y(""),Z([...f,j]))},children:"Adicionar tag"})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Atualizar Post"})})]})})]})})}}},function(e){e.O(0,[187,946,888,774,179],function(){return e(e.s=1841)}),_N_E=e.O()}]);